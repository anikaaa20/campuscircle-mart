<!DOCTYPE html>
<html>
<head>
  <title>CampusCircle Mart</title>
  <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
    <nav>
  <h1>ğŸ« CampusCircle Mart</h1>
  <div>
    <a href="/">Home</a>
    <% if (user) { %>
      <a href="/my-listings">My Listings</a>
      <a href="/listings/new">Sell Item</a>
      <span>ğŸ‘‹ <%= user.name %></span>
      <a href="/logout">Logout</a>
    <% } else { %>
      <a href="/login">Login</a>
      <a href="/register">Register</a>
    <% } %>
  </div>
</nav>



  <main>
         <form method="GET" action="/" class="search-bar">
  <input
    type="text"
    name="q"
    placeholder="Search by title, category, or description..."
    value="<%= typeof q !== 'undefined' ? q : '' %>"
  />
  <select name="category">
    <option value="All" <%= (category === 'All' || !category) ? 'selected' : '' %>>All categories</option>
    <option value="Electronics" <%= category === 'Electronics' ? 'selected' : '' %>>Electronics</option>
    <option value="Books" <%= category === 'Books' ? 'selected' : '' %>>Books</option>
    <option value="Furniture" <%= category === 'Furniture' ? 'selected' : '' %>>Furniture</option>
    <option value="Clothes" <%= category === 'Clothes' ? 'selected' : '' %>>Clothes</option>
    <option value="Other" <%= category === 'Other' ? 'selected' : '' %>>Other</option>
  </select>
  <button type="submit">Search</button>
</form>



    <h2>ğŸ“¦ Latest Listings</h2>
    <% if(listings.length === 0) { %>
      <p>No listings yet. <a href="/register">Create account</a> to start selling!</p>
    <% } else { %>
      <div class="listings-grid">
        <% listings.forEach(listing => { %>
          <div class="listing-card">
            <h3><a href="/listings/<%= listing.id %>"><%= listing.title %></a></h3>
            <p><strong>â‚¹<%= listing.price %></strong> â€¢ <%= listing.category %> â€¢ <%= listing.item_condition %></p>
            <small>by <%= listing.seller_name %></small>
          </div>
        <% }) %>
      </div>
    <% } %>
  </main>
</body>
</html>
